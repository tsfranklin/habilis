# ===================================
# CONFIGURACIÓN DEL SERVIDOR
# ===================================
server.port=8080
spring.application.name=habilis-api

# ===================================
# CONFIGURACIÓN DE BASE DE DATOS
# ===================================
# URL de conexión a PostgreSQL
# Formato: jdbc:postgresql://[host]:[puerto]/[nombre_bd]
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/habilis_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:admin123}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================
# CONFIGURACIÓN JPA/HIBERNATE
# ===================================
# Dialecto de PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Mostrar SQL en consola (útil para desarrollo)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Estrategia de generación de esquema
# - none: No hace nada
# - validate: Valida el esquema, no hace cambios
# - update: Actualiza el esquema (RECOMENDADO para desarrollo)
# - create: Crea el esquema, destruyendo datos previos
# - create-drop: Crea el esquema y lo elimina al cerrar
spring.jpa.hibernate.ddl-auto=update

# Propiedades adicionales de Hibernate
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# ===================================
# CONFIGURACIÓN DE DATA SEEDING
# ===================================
# Ejecutar data.sql después de crear las tablas
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always

# ===================================
# CONFIGURACIÓN DE LOGGING
# ===================================
logging.level.com.habilis.api=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ===================================
# CONFIGURACIÓN ADICIONAL
# ===================================
# Formato de fecha/hora JSON
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Europe/Madrid

# ===================================
# CONFIGURACIÓN DE EMAIL (SMTP)
# ===================================
# Configuración con Mailtrap para testing de email
spring.mail.host=sandbox.smtp.mailtrap.io
spring.mail.port=2525
spring.mail.username=ab635a1cb6d6f3
spring.mail.password=4c23533403eb23
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=false

# ===================================
# CONFIGURACIÓN DE SESIONES HTTP
# ===================================
# Timeout de sesión: 30 minutos (en segundos)
server.servlet.session.timeout=1800s

# Configuración de cookies de sesión
server.servlet.session.cookie.name=JSESSIONID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax
server.servlet.session.cookie.path=/
server.servlet.session.cookie.max-age=1800

# Persistencia de sesión
server.servlet.session.persistent=false
server.servlet.session.store-type=none
